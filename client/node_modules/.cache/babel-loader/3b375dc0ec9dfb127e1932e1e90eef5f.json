{"ast":null,"code":"/**\n * Module Dependencies\n */\nvar minstache = require('minstache');\n/**\n * Run the `src` function on the client-side, capture\n * the response and logs, and send back via\n * ipc to electron's main process\n */\n\n\nvar execute = \"\\n(function javascript () {\\n  var ipc = (window.__nightmare ? __nightmare.ipc : window[''].nightmare.ipc);\\n  try {\\n    var fn = ({{!src}}), \\n      response, \\n      args = [];\\n\\n    {{#args}}args.push({{!argument}});{{/args}}\\n\\n    if(fn.length - 1 == args.length) {\\n      args.push(((err, v) => {\\n          if(err) {\\n            ipc.send('error', err.message || err.toString());\\n          }\\n          ipc.send('response', v);\\n        }));\\n      fn.apply(null, args);\\n    } \\n    else {\\n      response = fn.apply(null, args);\\n      if(response && response.then) {\\n        response.then((v) => {\\n          ipc.send('response', v);\\n        })\\n        .catch((err) => {\\n          ipc.send('error', err)\\n        });\\n      } else {\\n        ipc.send('response', response);\\n      }\\n    }\\n  } catch (err) {\\n    ipc.send('error', err.message);\\n  }\\n})()\\n\";\n/**\n * Inject the `src` on the client-side, capture\n * the response and logs, and send back via\n * ipc to electron's main process\n */\n\nvar inject = \"\\n(function javascript () {\\n  var ipc = (window.__nightmare ? __nightmare.ipc : window[''].nightmare.ipc);\\n  try {\\n    var response = (function () { {{!src}} \\n})()\\n    ipc.send('response', response);\\n  } catch (e) {\\n    ipc.send('error', e.message);\\n  }\\n})()\\n\";\n/**\n * Export the templates\n */\n\nexports.execute = minstache.compile(execute);\nexports.inject = minstache.compile(inject);","map":null,"metadata":{},"sourceType":"script"}